\hypertarget{db_8h}{\section{include/animal/db.h File Reference}
\label{db_8h}\index{include/animal/db.\+h@{include/animal/db.\+h}}
}


functions for sqlite storage of node data  


{\ttfamily \#include \char`\"{}btree.\+h\char`\"{}}\\*
{\ttfamily \#include $<$sqlite3.\+h$>$}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structsls_animal_node_schema}{sls\+Animal\+Node\+Schema}
\begin{DoxyCompactList}\small\item\em struct used for mapping sql data to a \hyperlink{structsls_b_node}{sls\+B\+Node} structure \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{db_8h_abc3299412787c3934c0d5c21aef8a7a3}{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K}(\+\_\+err\+\_\+, \+\_\+rval\+\_\+)
\begin{DoxyCompactList}\small\item\em logging macro to check for errors \end{DoxyCompactList}\item 
\#define \hyperlink{db_8h_aa22556b7e8301d21e695911295485c40}{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K\+\_\+\+V\+O\+I\+D}(\+\_\+err\+\_\+)
\begin{DoxyCompactList}\small\item\em same as S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K, but causes function to exit void on error \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{db_8h_aba3947cf0c08e80529c84b4d571cf5ee}{typedef struct \hyperlink{structsls_animal_node_schema}{sls\+Animal\+Node\+Schema} {\bfseries sls\+Animal\+Node\+Schema}}\label{db_8h_aba3947cf0c08e80529c84b4d571cf5ee}

\item 
typedef int($\ast$ \hyperlink{db_8h_a522ec735e788c5f58240493cfa70f4c8}{sls\+Sql\+Callback\+Fn} )(void $\ast$data, int n\+\_\+cols, char $\ast$$\ast$col\+\_\+data\+\_\+array, char $\ast$$\ast$col\+\_\+name\+\_\+array)
\begin{DoxyCompactList}\small\item\em callback function type for sqlite3 queries \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{util_8h_a12d638c95aa5b7ad5241c1425471dad2}{sls\+Bool} \hyperlink{db_8h_ac01138888a01cdecdead2cc6b638b1bb}{sls\+\_\+save\+\_\+animal\+\_\+tree} (char const $\ast$path, \hyperlink{structsls_b_tree}{sls\+B\+Tree} $\ast$tree)
\begin{DoxyCompactList}\small\item\em saves a tree to a sqlite3 database \end{DoxyCompactList}\item 
\hyperlink{structsls_b_tree}{sls\+B\+Tree} $\ast$ \hyperlink{db_8h_ad0d4bf49466c5a4c459beda26683e61c}{sls\+\_\+load\+\_\+animal\+\_\+tree} (char const $\ast$path)
\begin{DoxyCompactList}\small\item\em loads and parses a sqlite3 database \end{DoxyCompactList}\item 
char const $\ast$ \hyperlink{db_8h_ae29153a1572c48a0cf5308121bced86b}{sls\+\_\+get\+\_\+create\+\_\+table\+\_\+sql} ()
\begin{DoxyCompactList}\small\item\em gets C\+R\+E\+A\+T\+E T\+A\+B\+L\+E statement \end{DoxyCompactList}\item 
char const $\ast$ \hyperlink{db_8h_a93e267dd08cc1148028fffbe62da7104}{sls\+\_\+get\+\_\+drop\+\_\+table\+\_\+statement} ()
\begin{DoxyCompactList}\small\item\em gets D\+E\+L\+E\+T\+E T\+A\+B\+L\+E statement \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
functions for sqlite storage of node data 

\hyperlink{db_8h}{db.\+h} Created by Steven Shea on 3/14/15. for C\+M\+P\+S 1600, project 2 

\subsection{Macro Definition Documentation}
\hypertarget{db_8h_abc3299412787c3934c0d5c21aef8a7a3}{\index{db.\+h@{db.\+h}!S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K@{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K}}
\index{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K@{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K}!db.\+h@{db.\+h}}
\subsubsection[{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K(
\begin{DoxyParamCaption}
\item[{}]{\+\_\+err\+\_\+, }
\item[{}]{\+\_\+rval\+\_\+}
\end{DoxyParamCaption}
)}}\label{db_8h_abc3299412787c3934c0d5c21aef8a7a3}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{            \(\backslash\)
        if((\_err\_) != NULL) \{                       \(\backslash\)
            fprintf(stderr, \textcolor{stringliteral}{"ERROR: %s\(\backslash\)n"}, (\_err\_));\(\backslash\)
            free((\_err\_));                          \(\backslash\)
            return (\_rval\_);                        \(\backslash\)
        \}                                           \(\backslash\)
    \} \textcolor{keywordflow}{while}(0)
\end{DoxyCode}


logging macro to check for errors 

accepts a char pointer. If the pointer is non-\/null, it prints it to stderr and returns the current function with given rval


\begin{DoxyParams}{Parameters}
{\em \+\_\+err\+\_\+} & if non-\/null, an malloced error message \\
\hline
{\em \+\_\+rval\+\_\+} & value to return if failure occurs \\
\hline
\end{DoxyParams}
\hypertarget{db_8h_aa22556b7e8301d21e695911295485c40}{\index{db.\+h@{db.\+h}!S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K\+\_\+\+V\+O\+I\+D@{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K\+\_\+\+V\+O\+I\+D}}
\index{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K\+\_\+\+V\+O\+I\+D@{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K\+\_\+\+V\+O\+I\+D}!db.\+h@{db.\+h}}
\subsubsection[{S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K\+\_\+\+V\+O\+I\+D}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K\+\_\+\+V\+O\+I\+D(
\begin{DoxyParamCaption}
\item[{}]{\+\_\+err\+\_\+}
\end{DoxyParamCaption}
)}}\label{db_8h_aa22556b7e8301d21e695911295485c40}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{               \(\backslash\)
        if((\_err\_) != NULL) \{                       \(\backslash\)
            fprintf(stderr, \textcolor{stringliteral}{"ERROR: %s\(\backslash\)n"}, (\_err\_));\(\backslash\)
            free((\_err\_));                          \(\backslash\)
            return;                                 \(\backslash\)
        \}                                           \(\backslash\)
    \} \textcolor{keywordflow}{while}(0)
\end{DoxyCode}


same as S\+L\+S\+\_\+\+E\+R\+R\+C\+H\+E\+C\+K, but causes function to exit void on error 



\subsection{Typedef Documentation}
\hypertarget{db_8h_a522ec735e788c5f58240493cfa70f4c8}{\index{db.\+h@{db.\+h}!sls\+Sql\+Callback\+Fn@{sls\+Sql\+Callback\+Fn}}
\index{sls\+Sql\+Callback\+Fn@{sls\+Sql\+Callback\+Fn}!db.\+h@{db.\+h}}
\subsubsection[{sls\+Sql\+Callback\+Fn}]{\setlength{\rightskip}{0pt plus 5cm}typedef int($\ast$ sls\+Sql\+Callback\+Fn)(void $\ast$data, int n\+\_\+cols, char $\ast$$\ast$col\+\_\+data\+\_\+array, char $\ast$$\ast$col\+\_\+name\+\_\+array)}}\label{db_8h_a522ec735e788c5f58240493cfa70f4c8}


callback function type for sqlite3 queries 

used as a parameter for sqlite3\+\_\+exec more details on \href{https://www.sqlite.org/c3ref/exec.html}{\tt https\+://www.\+sqlite.\+org/c3ref/exec.\+html}


\begin{DoxyParams}{Parameters}
{\em n\+\_\+cols} & number of columns query result \\
\hline
{\em col\+\_\+data\+\_\+array} & \mbox{[}description\mbox{]} \\
\hline
{\em col\+\_\+name\+\_\+array} & \mbox{[}description\mbox{]} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
sqlite3 return code 
\end{DoxyReturn}


\subsection{Function Documentation}
\hypertarget{db_8h_ae29153a1572c48a0cf5308121bced86b}{\index{db.\+h@{db.\+h}!sls\+\_\+get\+\_\+create\+\_\+table\+\_\+sql@{sls\+\_\+get\+\_\+create\+\_\+table\+\_\+sql}}
\index{sls\+\_\+get\+\_\+create\+\_\+table\+\_\+sql@{sls\+\_\+get\+\_\+create\+\_\+table\+\_\+sql}!db.\+h@{db.\+h}}
\subsubsection[{sls\+\_\+get\+\_\+create\+\_\+table\+\_\+sql}]{\setlength{\rightskip}{0pt plus 5cm}char const$\ast$ sls\+\_\+get\+\_\+create\+\_\+table\+\_\+sql (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{db_8h_ae29153a1572c48a0cf5308121bced86b}


gets C\+R\+E\+A\+T\+E T\+A\+B\+L\+E statement 

for storing btree and bnode data \begin{DoxyReturn}{Returns}
a static constant string 
\end{DoxyReturn}
\hypertarget{db_8h_a93e267dd08cc1148028fffbe62da7104}{\index{db.\+h@{db.\+h}!sls\+\_\+get\+\_\+drop\+\_\+table\+\_\+statement@{sls\+\_\+get\+\_\+drop\+\_\+table\+\_\+statement}}
\index{sls\+\_\+get\+\_\+drop\+\_\+table\+\_\+statement@{sls\+\_\+get\+\_\+drop\+\_\+table\+\_\+statement}!db.\+h@{db.\+h}}
\subsubsection[{sls\+\_\+get\+\_\+drop\+\_\+table\+\_\+statement}]{\setlength{\rightskip}{0pt plus 5cm}char const$\ast$ sls\+\_\+get\+\_\+drop\+\_\+table\+\_\+statement (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{db_8h_a93e267dd08cc1148028fffbe62da7104}


gets D\+E\+L\+E\+T\+E T\+A\+B\+L\+E statement 

for clearing game database \begin{DoxyReturn}{Returns}
a static constant string 
\end{DoxyReturn}
\hypertarget{db_8h_ad0d4bf49466c5a4c459beda26683e61c}{\index{db.\+h@{db.\+h}!sls\+\_\+load\+\_\+animal\+\_\+tree@{sls\+\_\+load\+\_\+animal\+\_\+tree}}
\index{sls\+\_\+load\+\_\+animal\+\_\+tree@{sls\+\_\+load\+\_\+animal\+\_\+tree}!db.\+h@{db.\+h}}
\subsubsection[{sls\+\_\+load\+\_\+animal\+\_\+tree}]{\setlength{\rightskip}{0pt plus 5cm}{\bf sls\+B\+Tree}$\ast$ sls\+\_\+load\+\_\+animal\+\_\+tree (
\begin{DoxyParamCaption}
\item[{char const $\ast$}]{path}
\end{DoxyParamCaption}
)}}\label{db_8h_ad0d4bf49466c5a4c459beda26683e61c}


loads and parses a sqlite3 database 

for use in animal guessing game


\begin{DoxyParams}{Parameters}
{\em path} & path to a sqlite3 database \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
if the given path stores valid game data, a \hyperlink{structsls_b_tree}{sls\+B\+Tree} pointer containing data described 
\end{DoxyReturn}
\hypertarget{db_8h_ac01138888a01cdecdead2cc6b638b1bb}{\index{db.\+h@{db.\+h}!sls\+\_\+save\+\_\+animal\+\_\+tree@{sls\+\_\+save\+\_\+animal\+\_\+tree}}
\index{sls\+\_\+save\+\_\+animal\+\_\+tree@{sls\+\_\+save\+\_\+animal\+\_\+tree}!db.\+h@{db.\+h}}
\subsubsection[{sls\+\_\+save\+\_\+animal\+\_\+tree}]{\setlength{\rightskip}{0pt plus 5cm}{\bf sls\+Bool} sls\+\_\+save\+\_\+animal\+\_\+tree (
\begin{DoxyParamCaption}
\item[{char const $\ast$}]{path, }
\item[{{\bf sls\+B\+Tree} $\ast$}]{tree}
\end{DoxyParamCaption}
)}}\label{db_8h_ac01138888a01cdecdead2cc6b638b1bb}


saves a tree to a sqlite3 database 

at the given path


\begin{DoxyParams}{Parameters}
{\em path} & path to a sqlite3 database use \char`\"{}\+:memory\+:\char`\"{} for an in-\/memory database \\
\hline
{\em tree} & pointer to a animal-\/data storing \hyperlink{structsls_b_tree}{sls\+B\+Tree}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{[}description\mbox{]} 
\end{DoxyReturn}
